(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{360:function(t,a,s){"use strict";s.r(a);var n=s(7),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"由来"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#由来"}},[t._v("#")]),t._v(" 由来")]),t._v(" "),a("p",[t._v("在日常编码中，我们接触最多的除了JSON外，就是XML格式了，一般而言，我们首先想到的是引入Dom4j包，却不知JDK已经封装有XML解析和构建工具：w3c dom。但是由于这个API操作比较繁琐，因此Hutool中提供了XmlUtil简化XML的创建、读和写的过程。")]),t._v(" "),a("h2",{attrs:{id:"使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[t._v("#")]),t._v(" 使用")]),t._v(" "),a("h3",{attrs:{id:"读取xml"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#读取xml"}},[t._v("#")]),t._v(" 读取XML")]),t._v(" "),a("p",[t._v("读取XML分为两个方法：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("XmlUtil.readXML")]),t._v(" 读取XML文件")]),t._v(" "),a("li",[a("code",[t._v("XmlUtil.parseXml")]),t._v(" 解析XML字符串为Document对象")])]),t._v(" "),a("h3",{attrs:{id:"写xml"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#写xml"}},[t._v("#")]),t._v(" 写XML")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("XmlUtil.toStr")]),t._v(" 将XML文档转换为String")]),t._v(" "),a("li",[a("code",[t._v("XmlUtil.toFile")]),t._v(" 将XML文档写入到文件")])]),t._v(" "),a("h3",{attrs:{id:"创建xml"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建xml"}},[t._v("#")]),t._v(" 创建XML")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("XmlUtil.createXml")]),t._v(" 创建XML文档, 创建的XML默认是utf8编码，修改编码的过程是在toStr和toFile方法里，即XML在转为文本的时候才定义编码。")])]),t._v(" "),a("h3",{attrs:{id:"xml操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#xml操作"}},[t._v("#")]),t._v(" XML操作")]),t._v(" "),a("p",[t._v("通过以下工具方法，可以完成基本的节点读取操作。")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("XmlUtil.cleanInvalid")]),t._v(" 去除XML文本中的无效字符")]),t._v(" "),a("li",[a("code",[t._v("XmlUtil.getElements")]),t._v(" 根据节点名获得子节点列表")]),t._v(" "),a("li",[a("code",[t._v("XmlUtil.getElement")]),t._v(" 根据节点名获得第一个子节点")]),t._v(" "),a("li",[a("code",[t._v("XmlUtil.elementText")]),t._v(" 根据节点名获得第一个子节点的文本值")]),t._v(" "),a("li",[a("code",[t._v("XmlUtil.transElements")]),t._v(" 将NodeList转换为Element列表")])]),t._v(" "),a("h3",{attrs:{id:"xml与对象转换"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#xml与对象转换"}},[t._v("#")]),t._v(" XML与对象转换")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("writeObjectAsXml")]),t._v(" 将可序列化的对象转换为XML写入文件，已经存在的文件将被覆盖。")]),t._v(" "),a("li",[a("code",[t._v("readObjectFromXml")]),t._v(" 从XML中读取对象。")])]),t._v(" "),a("blockquote",[a("p",[t._v("注意\n这两个方法严重依赖JDK的"),a("code",[t._v("XMLEncoder")]),t._v("和"),a("code",[t._v("XMLDecoder")]),t._v("，生成和解析必须成对存在（遵循固定格式），普通的XML转Bean会报错。")])]),t._v(" "),a("h3",{attrs:{id:"xpath操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#xpath操作"}},[t._v("#")]),t._v(" Xpath操作")]),t._v(" "),a("p",[t._v("Xpath的更多介绍请看文章："),a("a",{attrs:{href:"https://www.ibm.com/developerworks/cn/xml/x-javaxpathapi.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.ibm.com/developerworks/cn/xml/x-javaxpathapi.html"),a("OutboundLink")],1)]),t._v(" "),a("ul",[a("li",[a("code",[t._v("createXPath")]),t._v(" 创建XPath")]),t._v(" "),a("li",[a("code",[t._v("getByXPath")]),t._v(" 通过XPath方式读取XML节点等信息")])]),t._v(" "),a("p",[t._v("栗子：")]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v('<?xml version="1.0" encoding="utf-8"?>')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("returnsms")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" \n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("returnstatus")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Success（成功）"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("returnstatus")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("  \n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("message")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("ok"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("message")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("  \n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("remainpoint")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("1490"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("remainpoint")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("  \n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("taskID")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("885"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("taskID")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("  \n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("successCounts")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("1"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("successCounts")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("returnsms")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Document")]),t._v(" docResult"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XmlUtil")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readXML")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xmlFile"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//结果为“ok”")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XmlUtil")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getByXPath")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"//returnsms/message"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" docResult"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XPathConstants")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("STRING")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),a("p",[t._v("XmlUtil只是w3c dom的简单工具化封装，减少操作dom的难度，如果项目对XML依赖较大，依旧推荐Dom4j框架。")])])}),[],!1,null,null,null);a.default=e.exports}}]);